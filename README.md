# HMS - å¥åº·ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Java Web æŠ€æœ¯çš„å¥åº·ç®¡ç†ç³»ç»Ÿï¼Œå¸®åŠ©ç”¨æˆ·è®°å½•å’Œç®¡ç†ä¸ªäººåŠå®¶åº­æˆå‘˜çš„å¥åº·æ•°æ®ï¼ŒåŒ…æ‹¬å¥åº·æ¡£æ¡ˆã€è¿åŠ¨è®°å½•ã€è¥å…»é¥®é£Ÿç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

HMS (Health Management System) æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„å¥åº·ç®¡ç†å¹³å°ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·ç§‘å­¦ç®¡ç†å¥åº·ç”Ÿæ´»ã€‚ç³»ç»Ÿæ”¯æŒå¤šç”¨æˆ·ã€å¤šå®¶åº­æˆå‘˜ç®¡ç†ï¼Œæä¾›å¥åº·æ¡£æ¡ˆè®°å½•ã€è¿åŠ¨è¿½è¸ªã€è¥å…»é¥®é£Ÿåˆ†æç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### 1. ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- å¯†ç ä¿®æ”¹
- ä¼šè¯ç®¡ç†

### 2. å®¶åº­æˆå‘˜ç®¡ç†
- æ·»åŠ å®¶åº­æˆå‘˜
- æŸ¥çœ‹å®¶åº­æˆå‘˜åˆ—è¡¨
- åˆ é™¤å®¶åº­æˆå‘˜
- ä¸ºå®¶åº­æˆå‘˜è®°å½•å¥åº·æ•°æ®

### 3. å¥åº·æ¡£æ¡ˆ
- åŸºç¡€å¥åº·ä¿¡æ¯è®°å½•ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡ç­‰ï¼‰
- BMI è‡ªåŠ¨è®¡ç®—
- èº«ä½“æˆåˆ†æ•°æ®è®°å½•
- ä½“æ£€æŠ¥å‘Šç®¡ç†
- å¥åº·å»ºè®®ç”Ÿæˆ

### 4. è¿åŠ¨è®°å½•
- å¤šç§è¿åŠ¨ç±»å‹æ”¯æŒï¼ˆè·‘æ­¥ã€éª‘è¡Œã€æ¸¸æ³³ã€å¥èº«ç­‰ï¼‰
- è¿åŠ¨æ—¶é•¿ä¸çƒ­é‡è®°å½•
- è¿åŠ¨æ•°æ®å›¾è¡¨åˆ†æ
- è¿åŠ¨è¶‹åŠ¿è¿½è¸ª

### 5. è¥å…»é¥®é£Ÿ
- é£Ÿç‰©æ‘„å…¥è®°å½•
- è¥å…»ç´ è‡ªåŠ¨åˆ†æï¼ˆçƒ­é‡ã€è›‹ç™½è´¨ã€è„‚è‚ªã€ç¢³æ°´åŒ–åˆç‰©ã€ç»´ç”Ÿç´ ç­‰ï¼‰
- è¥å…»æ‘„å…¥å¯¹æ¯”æ¨èå€¼
- é¤æ¬¡åˆ†ç±»ï¼ˆæ—©é¤/åˆé¤/æ™šé¤/åŠ é¤ï¼‰
- é¥®é£Ÿå¤‡æ³¨å’Œè†³é£Ÿå»ºè®®

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Java Servlet** - Web åº”ç”¨å¼€å‘
- **MyBatis 3.5.16** - æŒä¹…å±‚æ¡†æ¶
- **MySQL 8.0.33** - å…³ç³»å‹æ•°æ®åº“
- **Maven** - é¡¹ç›®æ„å»ºå·¥å…·

### å‰ç«¯æŠ€æœ¯
- **JSP** - åŠ¨æ€é¡µé¢æŠ€æœ¯
- **JSTL 1.2** - JSP æ ‡å‡†æ ‡ç­¾åº“
- **CSS** - æ ·å¼è®¾è®¡

### å·¥å…·åº“
- **FastJSON 1.2.83** - JSON å¤„ç†
- **Jackson 2.9.9** - JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- **Gson 2.8.5** - JSON è§£æ
- **Commons IO 2.14.0** - IO å·¥å…·ç±»

### æœåŠ¡å™¨
- **Apache Tomcat** - Web åº”ç”¨æœåŠ¡å™¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
HMS/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/
â”‚   â”‚   â”‚       â”œâ”€â”€ handler/          # ç±»å‹å¤„ç†å™¨
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ MealTypeHandler.java
â”‚   â”‚   â”‚       â”œâ”€â”€ mapper/           # MyBatis æ˜ å°„æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BodyCompositionMapper.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ DietLogMapper.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExerciseLogMapper.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FamilyMemberMapper.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FoodItemMapper.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserMapper.java
â”‚   â”‚   â”‚       â”œâ”€â”€ pojo/             # å®ä½“ç±»
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FamilyMember.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BodyComposition.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ DietLog.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExerciseLog.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FoodItem.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚       â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FamilyMemberService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BodyCompositionService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ DietLogService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExerciseLogService.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ FoodItemService.java
â”‚   â”‚   â”‚       â”œâ”€â”€ util/             # å·¥å…·ç±»
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ SqlSessionFactoryUtils.java
â”‚   â”‚   â”‚       â””â”€â”€ web/              # Servlet æ§åˆ¶å™¨
â”‚   â”‚   â”‚           â”œâ”€â”€ loginServlet.java
â”‚   â”‚   â”‚           â”œâ”€â”€ registerServlet.java
â”‚   â”‚   â”‚           â”œâ”€â”€ dietServlet.java
â”‚   â”‚   â”‚           â”œâ”€â”€ addSportRecordServlet.java
â”‚   â”‚   â”‚           â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”‚   â”œâ”€â”€ com/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mapper/           # MyBatis XML æ˜ å°„æ–‡ä»¶
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UserMapper.xml
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ FamilyMemberMapper.xml
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚   â””â”€â”€ mybatis-config.xml    # MyBatis é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ webapp/
â”‚   â”‚       â”œâ”€â”€ css/                  # æ ·å¼æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ *.jsp                 # JSP é¡µé¢
â”‚   â”‚       â””â”€â”€ WEB-INF/
â”‚   â”‚           â””â”€â”€ web.xml           # Web åº”ç”¨é…ç½®
â”œâ”€â”€ pom.xml                           # Maven é…ç½®æ–‡ä»¶
â””â”€â”€ README.md                         # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- JDK 8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
- MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- Apache Tomcat 7 æˆ–æ›´é«˜ç‰ˆæœ¬

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd HMS
```

2. **é…ç½®æ•°æ®åº“**
   - åˆ›å»º MySQL æ•°æ®åº“ `hms`
   - ä¿®æ”¹ `src/main/resources/mybatis-config.xml` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
   ```xml
   <property name="url" value="jdbc:mysql:///hms?useSSL=false&amp;useServerPrepStmts=true"/>
   <property name="username" value="root"/>
   <property name="password" value="your_password"/>
   ```
   - æ‰§è¡Œæ•°æ®åº“è„šæœ¬åˆ›å»ºè¡¨ç»“æ„ï¼ˆéœ€è¦æ ¹æ®å®ä½“ç±»è‡ªè¡Œåˆ›å»ºï¼‰

3. **ç¼–è¯‘é¡¹ç›®**
```bash
mvn clean compile
```

4. **æ‰“åŒ…é¡¹ç›®**
```bash
mvn clean package
```

5. **éƒ¨ç½²è¿è¡Œ**
   - å°†ç”Ÿæˆçš„ `target/HMS.war` æ–‡ä»¶éƒ¨ç½²åˆ° Tomcat æœåŠ¡å™¨
   - æˆ–è€…ä½¿ç”¨ Maven Tomcat æ’ä»¶è¿è¡Œï¼š
   ```bash
   mvn tomcat7:run
   ```

6. **è®¿é—®åº”ç”¨**
   - æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8080/HMS`

## ğŸ“ æ•°æ®åº“é…ç½®

ç³»ç»Ÿä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œé»˜è®¤æ•°æ®åº“åä¸º `hms`ã€‚ä¸»è¦æ•°æ®è¡¨åŒ…æ‹¬ï¼š
- `user` - ç”¨æˆ·è¡¨
- `family_member` - å®¶åº­æˆå‘˜è¡¨
- `body_composition` - èº«ä½“æˆåˆ†è¡¨
- `diet_log` - é¥®é£Ÿè®°å½•è¡¨
- `exercise_log` - è¿åŠ¨è®°å½•è¡¨
- `food_item` - é£Ÿç‰©ä¿¡æ¯è¡¨

> **æ³¨æ„**ï¼šè¯·æ ¹æ®é¡¹ç›®ä¸­çš„å®ä½“ç±»ï¼ˆPOJOï¼‰å’Œ Mapper XML æ–‡ä»¶åˆ›å»ºç›¸åº”çš„æ•°æ®åº“è¡¨ç»“æ„ã€‚

## ğŸ”§ é…ç½®è¯´æ˜

### MyBatis é…ç½®
é…ç½®æ–‡ä»¶ä½äº `src/main/resources/mybatis-config.xml`ï¼Œä¸»è¦é…ç½®é¡¹ï¼š
- æ•°æ®åº“è¿æ¥ä¿¡æ¯
- ç±»å‹åˆ«åï¼ˆè‡ªåŠ¨æ‰«æ `com.pojo` åŒ…ï¼‰
- ç±»å‹å¤„ç†å™¨
- Mapper æ˜ å°„æ–‡ä»¶æ‰«æ

### Web é…ç½®
é…ç½®æ–‡ä»¶ä½äº `src/main/webapp/WEB-INF/web.xml`ï¼Œè®¾ç½®æ¬¢è¿é¡µé¢ä¸º `home_page.jsp`ã€‚

## ğŸ“¦ ä¾èµ–è¯´æ˜

ä¸»è¦ä¾èµ–é¡¹ï¼ˆè¯¦è§ `pom.xml`ï¼‰ï¼š
- `javax.servlet-api:3.1.0` - Servlet API
- `mybatis:3.5.16` - MyBatis æ¡†æ¶
- `mysql-connector-java:8.0.33` - MySQL é©±åŠ¨
- `jstl:1.2` - JSTL æ ‡ç­¾åº“
- `fastjson:1.2.83` - JSON å¤„ç†
- `jackson-databind:2.9.9` - JSON åºåˆ—åŒ–
- `gson:2.8.5` - JSON è§£æ
- `commons-io:2.14.0` - IO å·¥å…·

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### ç”¨æˆ·è®¤è¯æ¨¡å—
- `/HMS/loginServlet` - ç”¨æˆ·ç™»å½•
- `/HMS/registerServlet` - ç”¨æˆ·æ³¨å†Œ
- `/HMS/logoutServlet` - ç”¨æˆ·é€€å‡º
- `/HMS/updatePasswordServlet` - ä¿®æ”¹å¯†ç 

### å®¶åº­æˆå‘˜æ¨¡å—
- `/HMS/selectFamilyMembersByUserIdServlet` - æŸ¥è¯¢å®¶åº­æˆå‘˜
- `/HMS/addFamilyMemberCompositionServlet` - æ·»åŠ å®¶åº­æˆå‘˜å¥åº·æ•°æ®
- `/HMS/deleteFamilyMemberServlet` - åˆ é™¤å®¶åº­æˆå‘˜

### é¥®é£Ÿè®°å½•æ¨¡å—
- `/HMS/dietServlet` - é¥®é£Ÿè®°å½•ç®¡ç†
- `/HMS/addFoodServlet` - æ·»åŠ é£Ÿç‰©
- `/HMS/getFoodItemsServlet` - è·å–é£Ÿç‰©åˆ—è¡¨

### è¿åŠ¨è®°å½•æ¨¡å—
- `/HMS/addSportRecordServlet` - æ·»åŠ è¿åŠ¨è®°å½•
- `/HMS/getSportRecordsServlet` - è·å–è¿åŠ¨è®°å½•

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºå­¦ä¹ é¡¹ç›®ï¼Œä»…ä¾›å­¦ä¹ å’Œå‚è€ƒä½¿ç”¨ã€‚

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›é¡¹ç›®ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ Issue åé¦ˆã€‚

---

**å¥åº·+ ç®¡ç†ç³»ç»Ÿ** - å¥åº·ä»æ•°æ®å¼€å§‹
